# 家庭教師×AI 学習PWA

React + Viteで構築された、家庭教師×AIの学習PWAアプリケーションです。モバイルファースト設計で、iPhone/iPadでの使用を想定しています。

## 機能一覧

### 認証（モック）
- メール/パスワードでのログイン・新規登録
- localStorageベースの認証状態管理

### Chat（チャット機能）
- プロジェクト（教科）管理：国語、数学、英語など
- スレッド（会話）管理：プロジェクトごとの会話履歴
- メッセージ送信：テキスト、画像、音声入力、カメラ撮影対応
- AI応答モック：固定テンプレートによる応答
- Markdownレンダリング：見出し、箇条書き、太字、コードブロック対応
- 検索機能：スレッドタイトルでの検索

### Homework（宿題管理）
- CRUD操作：作成、閲覧、編集、削除
- 状態管理：未完了/完了の切り替え
- 画像添付：アップロードまたはカメラ撮影
- 期限管理：日時指定

### Tests（テスト結果管理）
- テスト結果の登録：教科、実施日、点数、満点、タグ
- 一覧表示：教科・日付・点数で表示
- 詳細表示：画像とメモ
- 分析タブ（モック）：弱点候補・次回アクションの表示

### Parent（保護者向け進捗）
- 今週のサマリー：
  - 宿題：未完了/完了数
  - テスト：最新スコア
  - 学習量：メッセージ数、学習日数
- コメント：先生コメント/AIコメント（モック）
- 共有・出力：共有リンク/PDF出力（UIのみ）

## 技術スタック

- **フレームワーク**: React 18
- **ビルドツール**: Vite
- **言語**: TypeScript
- **ルーティング**: React Router v6
- **スタイリング**: CSS（ダークテーマ）
- **Markdown**: react-markdown
- **日付処理**: date-fns

## アーキテクチャ

### レイヤー分離
- **Repository層**: localStorage永続化を担当
- **Service層**: ビジネスロジック（AI応答、プロジェクト初期化など）
- **UI層**: Reactコンポーネント

### データモデル
- User: ユーザー情報
- Project: プロジェクト（教科）
- Thread: スレッド（会話）
- Message: メッセージ
- Homework: 宿題
- TestResult: テスト結果

すべてのデータはlocalStorageに保存され、後でSupabaseに差し替え可能な設計になっています。

## セットアップ

### 必要な環境
- Node.js 18以上
- npm または yarn
- Supabase アカウント（将来の機能拡張用）

### インストール

```bash
npm install
```

### 環境変数の設定

1. `.env.example` をコピーして `.env.local` を作成：
```bash
cp .env.example .env.local
```

2. [Supabase ダッシュボード](https://supabase.com/dashboard) にログイン

3. プロジェクトを選択 → **Settings** → **API** を開く

4. `.env.local` に以下の値をコピー：
   - `VITE_SUPABASE_URL`: Project URL の値
   - `VITE_SUPABASE_ANON_KEY`: `anon` `public` キーの値

⚠️ **重要な注意事項**:
- **`service_role` キーは絶対に使用しないでください**（フロントエンドに公開されるため）
- Vite では環境変数名は `VITE_` で始める必要があります
- `.env.local` を変更した後は、開発サーバーを再起動してください

### 開発サーバー起動

```bash
npm run dev
```

ブラウザで `http://localhost:3000` を開きます。

> 💡 環境変数が未設定の場合、起動時にエラーメッセージが表示されます。

### ビルド

```bash
npm run build
```

### プレビュー

```bash
npm run preview
```

## 使用方法

1. **ログイン**: メールアドレスとパスワード（任意）を入力してログイン
2. **初回ログイン時**: 国語、数学、英語のプロジェクトが自動生成されます
3. **Chat**: プロジェクトを選択し、新しいチャットを開始
4. **Homework**: 宿題を追加し、進捗を管理
5. **Tests**: テスト結果を登録し、分析を確認
6. **Parent**: 保護者向けの進捗サマリーを確認

## モバイル対応

- iOSのsafe-area-insetに対応
- タッチ領域は44px以上を確保
- キーボード表示時のレイアウト調整
- モバイルファースト設計（iPhone幅はドロワー、iPad幅は2カラム）

## 今後の拡張予定

- Supabase連携（認証、データベース）
- Gemini API連携（AI応答）
- PWA機能（オフライン対応、インストール可能）
- プッシュ通知
- リアルタイム同期

## ライセンス

MIT

